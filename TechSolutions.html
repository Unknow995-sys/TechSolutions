<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechSolutions - The Aurora Experience</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #121212;
            --surface-color: rgba(26, 32, 44, 0.7);
            --primary-grad-start: #6366f1;
            --primary-grad-end: #a855f7;
            --accent-color: #F5A623;
            --text-color: #e2e8f0;
            --text-muted-color: #94a3b8;
            --border-color: rgba(255, 255, 255, 0.1);
            --font-family-base: 'Poppins', sans-serif;
            --border-radius: 12px;
            --transition-speed: 0.3s ease;
            --animation-fade-in-up: fadeInUp 0.6s ease-out forwards;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: var(--font-family-base); 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            line-height: 1.6;
            overflow-x: hidden;
            cursor: none;
            background-image: radial-gradient(circle at 20% 20%, hsla(214, 60%, 30%, 0.3) 0px, transparent 40%),
                              radial-gradient(circle at 80% 70%, hsla(280, 50%, 30%, 0.3) 0px, transparent 40%);
            background-attachment: fixed;
        }
        body.cursor-visible { cursor: default; }
        
        .fullscreen-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 9999; transition: opacity 1s ease-in-out, visibility 1s;
        }
        #splash-screen {
            background-color: #121212; color: white;
            display: flex; justify-content: center; align-items: center;
        }
        #splash-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #particle-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
        #splash-title {
            font-size: clamp(3rem, 12vw, 8rem); font-weight: 700;
            animation: subtle-float 5s ease-in-out infinite;
            user-select: none; position: relative; z-index: 2;
            transition: opacity 0.5s ease;
        }
        #splash-title.hidden { opacity: 0; }
        #splash-title span { display: inline-block; }
        @keyframes subtle-float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes rgb-text-flow { 0%{color:#fff} 25%{color:#ff5555} 50%{color:#55ff55} 75%{color:#55bbff} 100%{color:#fff} }
        #splash-title span.rgb-animate { animation: rgb-text-flow 2s linear infinite; }
        #starfield-canvas { background-color: #000; display: none; }

        #page-transition-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: var(--bg-color);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease-in-out;
        }
        #page-transition-overlay.active { opacity: 1; pointer-events: all; }

        #cursor-fx-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; pointer-events: none; opacity: 1; transition: opacity 0.5s ease;
        }
        #cursor-fx-container.hidden { opacity: 0; }
        .cursor-dot {
            position: absolute; background-color: white; border-radius: 50%;
            transform: translate(-50%, -50%); mix-blend-mode: difference;
        }

        #reset-animation-btn {
            position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px;
            background-color: var(--surface-color); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; z-index: 1000;
            opacity: 0; transform: scale(0.5);
            transition: opacity 0.3s ease, transform 0.3s ease, background-color 0.3s ease;
            visibility: hidden; backdrop-filter: blur(10px);
        }
        #reset-animation-btn.visible { opacity: 1; transform: scale(1); visibility: visible; }
        #reset-animation-btn:hover { background: linear-gradient(45deg, var(--primary-grad-start), var(--primary-grad-end)); }
        #reset-animation-btn svg { width: 24px; height: 24px; stroke: white; transition: transform 0.3s ease; }
        #reset-animation-btn:hover svg { transform: rotate(-180deg); }

        .page { display: none; min-height: 100vh; }
        .container { max-width: 1100px; margin: auto; padding: 0 20px; }
        
        .button { 
            padding: 12px 24px; border: none; border-radius: var(--border-radius); cursor: pointer; 
            font-weight: 600; font-family: var(--font-family-base);
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            display: inline-block; text-align: center;
        }
        .button:hover { transform: translateY(-3px) scale(1.05); }
        .button-primary { 
            background: linear-gradient(45deg, var(--primary-grad-start), var(--primary-grad-end));
            color: white; box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3);
        }
        .button-secondary { background-color: var(--surface-color); color: var(--text-color); border: 1px solid var(--border-color); }
        .button-danger { background-color: #b91c1c; color: white; }
        .button-success { background-color: var(--accent-color); color: var(--bg-color); }
        .button-sm { padding: 6px 12px; font-size: 0.8rem; border-radius: 8px; }

        .navbar { 
            background-color: var(--surface-color); padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
            position: sticky; top: 0; z-index: 10;
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
        }
        .navbar-hidden { opacity: 0; transform: translateY(-100%); transition: opacity 0.5s ease-out 0.5s, transform 0.5s ease-out 0.5s; }
        .navbar-visible { opacity: 1; transform: translateY(0); }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; }
        .navbar .logo { font-size: 1.75rem; font-weight: 700; color: white; text-decoration: none; cursor: pointer; }
        .navbar .nav-links { list-style: none; display: flex; }
        .navbar .nav-links li { margin-left: 25px; }
        .navbar .nav-links a { color: var(--text-muted-color); text-decoration: none; font-weight: 500; cursor: pointer; position: relative; padding-bottom: 5px; transition: color var(--transition-speed); }
        .navbar .nav-links a:hover { color: white; }
        .navbar .nav-links a::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: linear-gradient(45deg, var(--primary-grad-start), var(--primary-grad-end)); transition: width var(--transition-speed); }
        .navbar .nav-links a:hover::after { width: 100%; }
        
        .slider { 
            height: 70vh; display: flex; justify-content: center; align-items: center; text-align: center; 
            padding: 0 20px;
        }
        .slider h1 { font-size: clamp(2.5rem, 8vw, 4.5rem); font-weight: 700; line-height: 1.2; }
        .slider h1 span {
            background: linear-gradient(45deg, var(--primary-grad-start), var(--primary-grad-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .page-content { padding: 80px 20px; }
        .page-content h2 { font-size: 3rem; margin-bottom: 20px; text-align: center; }
        .page-content p { max-width: 700px; margin: 0 auto 60px auto; text-align: center; color: var(--text-muted-color); font-size: 1.1rem; }

        .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 40px; }
        .service-card { 
            background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); 
            text-align: center; transition: transform var(--transition-speed), box-shadow var(--transition-speed); 
            overflow: hidden; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            opacity: 0; transform: translateY(30px);
            animation-fill-mode: forwards;
            cursor: pointer;
        }
        .service-card.is-visible { animation-name: fadeInUp; animation-duration: 0.6s; animation-timing-function: ease-out; }
        .service-card:hover { transform: translateY(-10px); box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .service-card img { width: 100%; height: 200px; object-fit: cover; border-radius: var(--border-radius); margin-bottom: 20px; }
        .service-card h3 { font-size: 1.5rem; margin-bottom: 10px; }
        .service-card .price { font-weight: 700; font-size: 1.25rem; color: white; }
        
        .footer { background-color: transparent; text-align: center; padding: 40px 0; margin-top: 60px; border-top: 1px solid var(--border-color); }

        #page-login { display: none; justify-content: center; align-items: center; }
        .login-form { background: var(--surface-color); padding: 40px; border-radius: var(--border-radius); width: 100%; max-width: 400px; text-align: center; backdrop-filter: blur(10px); border: 1px solid var(--border-color); }
        .form-group input { background-color: rgba(0,0,0,0.2); border: 1px solid var(--border-color); color: var(--text-color); padding: 12px; border-radius: var(--border-radius); width: 100%; }
        
        #page-dashboard { display: none; flex-direction: row; height: 100vh; }
        .sidebar { 
            width: 250px; background-color: rgba(10, 10, 20, 0.8); flex-shrink: 0; 
            backdrop-filter: blur(10px); border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; padding: 20px 0;
        }
        .sidebar-header { padding: 20px; text-align: center; }
        .sidebar-header h3 { font-size: 2rem; font-weight: 700; }
        .sidebar-nav { list-style: none; flex-grow: 1; margin-top: 40px; }
        .sidebar-nav li a { 
            display: block; color: var(--text-muted-color); text-decoration: none; 
            padding: 15px 30px; transition: background-color var(--transition-speed), color var(--transition-speed); 
            border-left: 4px solid transparent;
        }
        .sidebar-nav li a.active, .sidebar-nav li a:hover { 
            background-color: rgba(255,255,255,0.05); color: white;
            border-image: linear-gradient(to bottom, var(--primary-grad-start), var(--primary-grad-end)) 1;
        }
        .sidebar-footer { padding: 20px; }
        
        .main-content { flex-grow: 1; padding: 40px; overflow-y: auto; }
        .dashboard-section { display: none; }
        .dashboard-section.active { display: block; }

        .content-box { 
            background: var(--surface-color); padding: 30px; border-radius: var(--border-radius); 
            backdrop-filter: blur(10px); border: 1px solid var(--border-color);
            margin-bottom: 40px;
        }
        
        .crud-table { width: 100%; border-collapse: collapse; }
        .crud-table th, .crud-table td { padding: 15px; text-align: left; vertical-align: middle; }
        .crud-table th { 
            background-color: rgba(255,255,255,0.05); font-weight: 600; 
            color: var(--text-muted-color); text-transform: uppercase; font-size: 0.85rem;
            letter-spacing: 1px;
        }
        .crud-table td { border-bottom: 1px solid var(--border-color); }
        .crud-table tr:hover { background-color: rgba(255,255,255,0.03); }

        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); z-index: 1000; 
            display: none; justify-content: center; align-items: center; 
            opacity: 0; transition: opacity 0.3s ease; 
        }
        .modal-content { 
            background: var(--surface-color); backdrop-filter: blur(10px); 
            border: 1px solid var(--border-color); padding: 30px; 
            border-radius: var(--border-radius); width: 90%; max-width: 500px; 
            transform: scale(0.9); transition: transform 0.3s ease; 
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; }
        .modal-header h3 { margin: 0; font-size: 1.5rem; }
        .close-modal { font-size: 1.8rem; cursor: pointer; border: none; background: none; color: var(--text-muted-color); transition: color var(--transition-speed); }
        .close-modal:hover { color: white; }
        .modal-footer { text-align: right; margin-top: 25px; border-top: 1px solid var(--border-color); padding-top: 20px; }
        .modal-footer button { margin-left: 10px; }

        /* Estilos para la vista de éxito del modal de contacto */
        #contact-success-view { display: none; text-align: center; }
        #contact-success-view svg { width: 60px; height: 60px; margin-bottom: 20px; color: #28a745; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-on-scroll { opacity: 0; transform: translateY(30px); }
        .animate-on-scroll.is-visible { animation: var(--animation-fade-in-up); }
    </style>
</head>
<body>

    <div id="splash-screen" class="fullscreen-overlay">
        <div id="cursor-fx-container"></div>
        <canvas id="particle-canvas"></canvas>
        <h1 id="splash-title">TechSolutions</h1>
    </div>
    <canvas id="starfield-canvas" class="fullscreen-overlay"></canvas>
    <div id="page-transition-overlay"></div>

    <div id="page-home" class="page">
        <nav class="navbar navbar-hidden">
            <div class="container">
                <a onclick="showPage('page-home')" class="logo">TechSolutions</a>
                <ul class="nav-links">
                    <li><a onclick="showPage('page-servicios')">Servicios</a></li>
                    <li><a onclick="showPage('page-login')">Admin Login</a></li>
                </ul>
            </div>
        </nav>
        
        <header class="slider">
            <div class="container">
                <h1>Soluciones Tecnológicas <br><span>a tu Medida</span></h1>
            </div>
        </header>

        <div id="home-content-wrapper" class="hidden">
            <main class="page-content" id="quienes-somos-section">
                <div class="container">
                    <h2 class="animate-on-scroll">¿Quiénes Somos?</h2>
                    <p class="animate-on-scroll">Somos una empresa líder dedicada a ofrecer servicios de software de alta calidad, combinando innovación, experiencia y un compromiso total con el éxito de nuestros clientes.</p>
                </div>
            </main>
            <footer class="footer">
                <p>&copy; 2025 TechSolutions. Todos los derechos reservados.</p>
            </footer>
        </div>
    </div>
    
    <div id="page-servicios" class="page">
        <nav class="navbar navbar-visible"><div class="container"><a onclick="showPage('page-home')" class="logo">TechSolutions</a><ul class="nav-links"><li><a onclick="showPage('page-home')">Inicio</a></li><li><a onclick="showPage('page-servicios')">Servicios</a></li><li><a onclick="showPage('page-login')">Admin Login</a></li></ul></div></nav>
        <main class="page-content"><div class="container">
            <h2>Nuestros Servicios</h2>
            <p>Ofrecemos un abanico de soluciones diseñadas para impulsar tu negocio en el mundo digital.</p>
            <div class="services-grid">
                <div class="service-card" onclick="openContactModal('Desarrollo Web Corporativo', '$1,200.00')"><img src="img/Desarrollo_Web.png" alt="Desarrollo Web"><h3>Desarrollo Web Corporativo</h3><p class="price">$1,200.00</p></div>
                <div class="service-card" onclick="openContactModal('Desarrollo de App Móvil', '$3,500.00')"><img src="img/app_mobil.jpg" alt="App Móvil"><h3>Desarrollo de App Móvil</h3><p class="price">$3,500.00</p></div>
                <div class="service-card" onclick="openContactModal('Consultoría TI Estratégica', '$600.00')"><img src="img/consultoria_it.jpeg" alt="Consultoría TI"><h3>Consultoría TI Estratégica</h3><p class="price">$600.00</p></div>
                <div class="service-card" onclick="openContactModal('Soporte Técnico 24/7', '$300.00/mes')"><img src="img/soporte_tecnico.png" alt="Soporte Técnico"><h3>Soporte Técnico 24/7</h3><p class="price">$300.00/mes</p></div>
            </div>
        </div></main>
        <footer class="footer"><p>&copy; 2025 TechSolutions. Todos los derechos reservados.</p></footer>
    </div>

    <div id="page-login" class="page">
        <div class="login-form"><h2>Panel de Administración</h2><p>Ingresa tus credenciales para continuar.</p><form id="login-form-element"><div class="form-group"><label for="username">Usuario:</label><input type="text" id="username" required></div><div class="form-group"><label for="password">Contraseña:</label><input type="password" id="password" required></div><button type="submit" class="button button-primary" style="width:100%;">Ingresar</button><p id="login-error">Usuario o contraseña incorrectos.</p></form></div>
    </div>

    <div id="page-dashboard" class="page">
        <aside class="sidebar">
            <div class="sidebar-header"><h3>Dashboard</h3></div>
            <ul class="sidebar-nav">
                <li><a href="#" class="nav-link active" data-target="section-services">Gestionar Servicios</a></li>
                <li><a href="#" class="nav-link" data-target="section-users">Gestionar Usuarios</a></li>
            </ul>
            <div class="sidebar-footer">
                <button onclick="showPage('page-home')" class="button button-secondary" style="width:100%; margin-bottom: 10px;">Ver Sitio Público</button>
                <button id="logout-button" class="button button-danger" style="width:100%;">Cerrar Sesión</button>
            </div>
        </aside>
        <main class="main-content">
            <section id="section-services" class="dashboard-section active">
                <div class="content-box">
                    <div class="content-header"><h2>Gestión de Servicios</h2><button class="button button-success" onclick="openModal('add', 'service')">+ Agregar Servicio</button></div>
                    <table class="crud-table"><thead><tr><th>ID</th><th>Nombre</th><th>Precio</th><th>Acciones</th></tr></thead><tbody id="services-table-body">
                        <tr><td>1</td><td>Desarrollo Web Corporativo</td><td>$1,200</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'service', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                        <tr><td>2</td><td>Desarrollo de App Móvil</td><td>$3,500</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'service', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                        <tr><td>3</td><td>Consultoría TI Estratégica</td><td>$600</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'service', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                        <tr><td>4</td><td>Soporte Técnico 24/7</td><td>$300/mes</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'service', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                    </tbody></table>
                </div>
            </section>
            <section id="section-users" class="dashboard-section">
                <div class="content-box">
                    <div class="content-header"><h2>Gestión de Usuarios</h2><button class="button button-success" onclick="openModal('add', 'user')">+ Agregar Usuario</button></div>
                    <table class="crud-table"><thead><tr><th>ID</th><th>Nombre</th><th>Email</th><th>Rol</th><th>Acciones</th></tr></thead><tbody id="users-table-body">
                        <tr><td>101</td><td>Carlos Rivera</td><td>c.r@email.com</td><td>Cliente</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'user', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                        <tr><td>102</td><td>Ana Gómez</td><td>a.g@email.com</td><td>Cliente</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'user', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                        <tr><td>001</td><td>Admin User</td><td>admin@tech.com</td><td>Admin</td><td class="actions-cell"><button class="button button-secondary button-sm" onclick="openModal('edit', 'user', this)">Editar</button><button class="button button-danger button-sm" onclick="deleteRow(this)">Eliminar</button></td></tr>
                    </tbody></table>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para el CRUD de Admin -->
    <div class="modal-overlay" id="crud-modal">
        <div class="modal-content">
            <div class="modal-header"><h3 id="modal-title">Título del Modal</h3><button class="close-modal" onclick="closeModal()">&times;</button></div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-footer"><button class="button button-secondary" onclick="closeModal()">Cancelar</button><button class="button button-primary" id="modal-save-btn">Guardar Cambios</button></div>
        </div>
    </div>

    <!- Modal para Contacto de Servicios -->
    <div class="modal-overlay" id="contact-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="contact-modal-title">Solicitar Servicio</h3>
                <button class="close-modal" onclick="closeContactModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="contact-form-view">
                    <p id="contact-service-price" style="text-align: center; font-size: 1.2rem; margin-bottom: 20px;"></p>
                    <p style="text-align: center; color: var(--text-muted-color); margin-bottom: 20px;">Déjanos tus datos y nos pondremos en contacto contigo a la brevedad.</p>
                    <div class="form-group"><label>Nombre Completo:</label><input type="text" id="contact-name" required></div>
                    <div class="form-group"><label>Email:</label><input type="email" id="contact-email" required></div>
                </div>
                <div id="contact-success-view">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                    <h3>¡Solicitud Enviada!</h3>
                    <p>Gracias por tu interés. Nuestro equipo te contactará pronto.</p>
                </div>
            </div>
            <div class="modal-footer" id="contact-modal-footer">
                <button class="button button-secondary" onclick="closeContactModal()">Cancelar</button>
                <button class="button button-primary" onclick="submitContactForm()">Solicitar Información</button>
            </div>
        </div>
    </div>

    <div id="reset-animation-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/>
        </svg>
    </div>

    <script>
        // ANIMACIONES DE BIENVENIDA
        const particleCanvas = document.getElementById('particle-canvas');
        const starfieldCanvas = document.getElementById('starfield-canvas');
        const p_ctx = particleCanvas.getContext('2d');
        const s_ctx = starfieldCanvas.getContext('2d');
        let particlesArray, particleAnimationId, cursorAnimationId, starfieldAnimationId;

        // PARTÍCULAS
        class Particle {
            constructor(x, y, directionX, directionY, size) { this.x = x; this.y = y; this.directionX = directionX; this.directionY = directionY; this.size = size; }
            draw() { p_ctx.beginPath(); p_ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); p_ctx.fillStyle = 'rgba(173, 216, 230, 0.5)'; p_ctx.fill(); }
            update() { if (this.x > particleCanvas.width || this.x < 0) { this.directionX = -this.directionX; } if (this.y > particleCanvas.height || this.y < 0) { this.directionY = -this.directionY; } this.x += this.directionX; this.y += this.directionY; this.draw(); }
        }
        function initParticles() {
            particleCanvas.width = window.innerWidth; particleCanvas.height = window.innerHeight;
            particlesArray = [];
            let numberOfParticles = (particleCanvas.height * particleCanvas.width) / 9000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2) + 1;
                let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * .4) - .2;
                let directionY = (Math.random() * .4) - .2;
                particlesArray.push(new Particle(x, y, directionX, directionY, size));
            }
        }
        function connectParticles() {
            let opacityValue = 1;
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                    if (distance < (particleCanvas.width/7) * (particleCanvas.height/7)) {
                        opacityValue = 1 - (distance/20000);
                        p_ctx.strokeStyle = 'rgba(173, 216, 230,' + opacityValue + ')';
                        p_ctx.lineWidth = 1;
                        p_ctx.beginPath(); p_ctx.moveTo(particlesArray[a].x, particlesArray[a].y); p_ctx.lineTo(particlesArray[b].x, particlesArray[b].y); p_ctx.stroke();
                    }
                }
            }
        }
        function animateParticles() { p_ctx.clearRect(0,0,innerWidth,innerHeight); particlesArray.forEach(p=>p.update()); connectParticles(); particleAnimationId = requestAnimationFrame(animateParticles); }
        function startParticleAnimation() { initParticles(); animateParticles(); }
        function stopParticleAnimation() { cancelAnimationFrame(particleAnimationId); }
        window.addEventListener('resize', () => { if (particleAnimationId) initParticles(); });

        // CURSOR PERSONALIZADO
        const cursorFxContainer = document.getElementById('cursor-fx-container');
        const dots = []; const mousePos = { x: 0, y: 0 }; const numDots = 15;
        function initCursor() { for (let i = 0; i < numDots; i++) { const dot = document.createElement('div'); dot.className = 'cursor-dot'; cursorFxContainer.appendChild(dot); dots.push({ el: dot, x: 0, y: 0, size: 1 - i * 0.05 }); } }
        function updateCursorPositions() { let p = dots[0]; p.x += (mousePos.x - p.x) * 0.25; p.y += (mousePos.y - p.y) * 0.25; for (let i = 1; i < numDots; i++) { const c = dots[i]; c.x += (p.x - c.x) * 0.25; c.y += (p.y - c.y) * 0.25; p = c; } }
        function drawCursor() { dots.forEach(d => { const s = 20 * d.size; d.el.style.width = `${s}px`; d.el.style.height = `${s}px`; d.el.style.transform = `translate(${d.x - s/2}px, ${d.y - s/2}px)`; }); }
        function animateCursor() { updateCursorPositions(); drawCursor(); cursorAnimationId = requestAnimationFrame(animateCursor); }
        function startCursorAnimation() { cursorFxContainer.classList.remove('hidden'); animateCursor(); }
        function stopCursorAnimation() { cursorFxContainer.classList.add('hidden'); cancelAnimationFrame(cursorAnimationId); }
        window.addEventListener('mousemove', e => { mousePos.x = e.clientX; mousePos.y = e.clientY; });

        // VIAJE DE ESTRELLAS
        let stars = []; let speed = 10;
        function initStarfield() { starfieldCanvas.width = window.innerWidth; starfieldCanvas.height = window.innerHeight; stars = []; for (let i = 0; i < 800; i++) { stars.push({ x: (Math.random() - 0.5) * starfieldCanvas.width, y: (Math.random() - 0.5) * starfieldCanvas.height, z: Math.random() * starfieldCanvas.width }); } }
        function animateStarfield() { s_ctx.fillStyle = 'black'; s_ctx.fillRect(0, 0, starfieldCanvas.width, starfieldCanvas.height); s_ctx.fillStyle = 'white'; let cx = starfieldCanvas.width / 2; let cy = starfieldCanvas.height / 2; stars.forEach(s => { s.z -= speed; if (s.z <= 0) s.z = starfieldCanvas.width; let k = 128.0 / s.z; let px = s.x * k + cx; let py = s.y * k + cy; if (px >= 0 && px <= starfieldCanvas.width && py >= 0 && py <= starfieldCanvas.height) { let size = (1 - s.z / starfieldCanvas.width) * 5; s_ctx.beginPath(); s_ctx.arc(px, py, size, 0, Math.PI * 2); s_ctx.fill(); } }); starfieldAnimationId = requestAnimationFrame(animateStarfield); }
        function startStarfield() { starfieldCanvas.style.display = 'block'; initStarfield(); animateStarfield(); }
        function stopStarfield() { cancelAnimationFrame(starfieldAnimationId); starfieldCanvas.style.opacity = '0'; setTimeout(() => { starfieldCanvas.style.display = 'none'; starfieldCanvas.style.opacity = '1'; }, 1000); }

        // APLICACIÓN
        document.addEventListener('DOMContentLoaded', () => {
            const splashScreen = document.getElementById('splash-screen');
            const splashTitle = document.getElementById('splash-title');
            const navbar = document.querySelector('#page-home .navbar');
            const homeContent = document.getElementById('home-content-wrapper');
            const resetBtn = document.getElementById('reset-animation-btn');
            const body = document.body;
            let isIntroClicked = false;

            startParticleAnimation(); initCursor(); startCursorAnimation();

            const titleText = splashTitle.textContent; splashTitle.textContent = '';
            titleText.split('').forEach(char => { const span = document.createElement('span'); span.textContent = char; splashTitle.appendChild(span); });
            const letterSpans = splashTitle.querySelectorAll('span');

            splashScreen.addEventListener('mouseover', () => { if (!isIntroClicked) { letterSpans.forEach((span, index) => { span.style.animationDelay = `${index * 0.1}s`; span.classList.add('rgb-animate'); }); } });
            splashScreen.addEventListener('mouseout', () => { if (!isIntroClicked) { letterSpans.forEach(span => { span.classList.remove('rgb-animate'); span.style.animationDelay = ''; }); } });

            splashScreen.addEventListener('click', () => {
                if (isIntroClicked) return;
                isIntroClicked = true;
                splashTitle.classList.add('hidden');
                stopCursorAnimation();
                setTimeout(() => { splashScreen.classList.add('hidden'); stopParticleAnimation(); startStarfield(); }, 500);
                setTimeout(() => {
                    stopStarfield(); body.classList.add('cursor-visible');
                    navbar.classList.remove('navbar-hidden'); navbar.classList.add('navbar-visible');
                    homeContent.classList.remove('hidden'); homeContent.classList.add('visible');
                    resetBtn.classList.add('visible');
                }, 2500);
            });

            resetBtn.addEventListener('click', () => {
                isIntroClicked = false; body.classList.remove('cursor-visible');
                resetBtn.classList.remove('visible');
                homeContent.classList.remove('visible'); homeContent.classList.add('hidden');
                navbar.classList.remove('navbar-visible'); navbar.classList.add('navbar-hidden');
                splashTitle.classList.remove('hidden');
                splashScreen.classList.remove('hidden');
                startParticleAnimation(); startCursorAnimation();
            });
            
            showPage('page-home');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) { entry.target.classList.add('is-visible'); observer.unobserve(entry.target); }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.animate-on-scroll, .service-card').forEach(el => observer.observe(el));
        });

        // NAVEGACIÓN Y CRUD 
        let editRowElement = null;
        const pageTransitionOverlay = document.getElementById('page-transition-overlay');
        let currentPage = null;

        function showPage(pageId) {
            if (currentPage === pageId) return;

            const targetPage = document.getElementById(pageId);
            if (!targetPage) return;

            pageTransitionOverlay.classList.add('active');

            setTimeout(() => {
                if (currentPage) {
                    document.getElementById(currentPage).style.display = 'none';
                }
                
                const displayStyle = ['page-login', 'page-dashboard'].includes(pageId) ? 'flex' : 'block';
                targetPage.style.display = displayStyle;
                currentPage = pageId;
                window.scrollTo(0, 0);

                if (pageId !== 'page-home') { document.body.classList.add('cursor-visible'); } 
                else if (!document.getElementById('splash-screen').classList.contains('hidden')) { document.body.classList.remove('cursor-visible'); }
                
                document.querySelectorAll('.animate-on-scroll, .service-card').forEach(el => el.classList.remove('is-visible'));
                
                if (pageId === 'page-servicios') {
                    const cards = document.querySelectorAll('#page-servicios .service-card');
                    cards.forEach((card, index) => {
                        card.style.animationDelay = `${index * 150}ms`;
                    });
                }

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) { entry.target.classList.add('is-visible'); observer.unobserve(entry.target); }
                    });
                }, { threshold: 0.1 });
                document.querySelectorAll('.animate-on-scroll, .service-card').forEach(el => observer.observe(el));

                pageTransitionOverlay.classList.remove('active');
            }, 400);
        }

        document.getElementById('login-form-element').addEventListener('submit', function(e) { e.preventDefault(); if (document.getElementById('username').value === 'admin' && document.getElementById('password').value === 'admin') { showPage('page-dashboard'); document.getElementById('login-error').style.display = 'none'; } else { document.getElementById('login-error').style.display = 'block'; } });
        document.querySelectorAll('.sidebar-nav .nav-link').forEach(link => { link.addEventListener('click', function(e) { e.preventDefault(); document.querySelectorAll('.sidebar-nav .nav-link, .dashboard-section').forEach(el => el.classList.remove('active')); this.classList.add('active'); document.getElementById(this.getAttribute('data-target')).classList.add('active'); }); });
        document.getElementById('logout-button').addEventListener('click', () => { document.getElementById('login-form-element').reset(); showPage('page-login'); });
        
        // --- LÓGICA DE MODALES (CRUD Y CONTACTO) ---
        const crudModal = document.getElementById('crud-modal');
        const contactModal = document.getElementById('contact-modal');

        function openModal(mode, type, element = null) { /* ... (Lógica del modal de admin) ... */ }
        function closeModal() { /* ... (Lógica de cierre del modal de admin) ... */ }
        function saveService() { /* ... (Lógica de guardado de servicio) ... */ }
        function saveUser() { /* ... (Lógica de guardado de usuario) ... */ }
        function deleteRow(element) { /* ... (Lógica de borrado de fila) ... */ }

        // Lógica para el nuevo modal de contacto
        function openContactModal(serviceName, servicePrice) {
            document.getElementById('contact-modal-title').textContent = serviceName;
            document.getElementById('contact-service-price').textContent = `Precio: ${servicePrice}`;
            document.getElementById('contact-form-view').style.display = 'block';
            document.getElementById('contact-success-view').style.display = 'none';
            document.getElementById('contact-modal-footer').style.display = 'flex';
            document.getElementById('contact-name').value = '';
            document.getElementById('contact-email').value = '';

            contactModal.style.display = 'flex';
            setTimeout(() => { contactModal.style.opacity = 1; contactModal.querySelector('.modal-content').style.transform = 'scale(1)'; }, 10);
        }

        function closeContactModal() {
            contactModal.style.opacity = 0;
            contactModal.querySelector('.modal-content').style.transform = 'scale(0.9)';
            setTimeout(() => { contactModal.style.display = 'none'; }, 300);
        }

        function submitContactForm() {
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            if (!name || !email) {
                alert('Por favor, completa todos los campos.');
                return;
            }
            
            document.getElementById('contact-form-view').style.display = 'none';
            document.getElementById('contact-success-view').style.display = 'block';
            document.getElementById('contact-modal-footer').style.display = 'none';

            setTimeout(closeContactModal, 2500);
        }
    </script>
</body>
</html>